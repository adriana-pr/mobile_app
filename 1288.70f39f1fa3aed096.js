"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1288],{1288:(C,f,c)=>{c.r(f),c.d(f,{RecipeEditPageModule:()=>Z});var h=c(6814),r=c(95),o=c(9810),d=c(1837),e=c(9212),v=c(2333),b=c(3245),P=c(6955);function y(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",15),e._uU(1),e.qZA()),2&i){const a=s.$implicit;e.Q6J("value",a.category_id),e.xp6(),e.hij(" ",a.category_name," ")}}function E(i,s){if(1&i&&(e.TgZ(0,"ion-text",16)(1,"p",17),e._uU(2),e.qZA()()),2&i){const a=e.oxw();e.xp6(2),e.hij("*",a.errorMessage,"")}}const R=[{path:"",component:(()=>{var i;class s{constructor(t,u,n,l,g,p){this.formBuilder=t,this.getToken=u,this.categoriesService=n,this.recipesService=l,this.router=g,this.route=p,this.isAlertOpen=!1,this.alertButtons=[{cssClass:"alert-button-confirm",text:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438",handler:()=>{this.router.navigate([""]).then(m=>{this.router.navigate(["myRecipes",this.categoryId],{queryParams:{category:this.categoryName.category_name}})})}}]}ngOnInit(){this.recipeForm=this.formBuilder.group({recipe_id:Number,title:["",r.kI.required],photo:["",r.kI.required],category:["",r.kI.required],ingredients:["",r.kI.required],preparation:["",r.kI.required],show_to_others:[0],user_token:String}),this.token=this.getToken.getLogin(),null==this.categoriesService.getCategoriesFromLocalStorage()?this.categoriesService.getCategories(this.token).subscribe(t=>{this.categories=t,this.categories&&0!==this.categories.length&&this.categoriesService.setCategories(this.categories)}):this.categories=this.categoriesService.getCategoriesFromLocalStorage(),this.recipeId=this.route.snapshot.paramMap.get("id"),this.categoryId=this.route.snapshot.paramMap.get("category"),this.categoryName=this.categories.find(t=>t.category_id==this.categoryId),this.recipesService.getRecipe(this.recipeId).subscribe(t=>{this.setValueForm(t)})}setValueForm(t){var u,n,l,g,p,m,_,F;null===(u=this.recipeForm.get("recipe_id"))||void 0===u||u.setValue(this.recipeId),null===(n=this.recipeForm.get("title"))||void 0===n||n.setValue(t.name),null===(l=this.recipeForm.get("photo"))||void 0===l||l.setValue(t.image_url),null===(g=this.recipeForm.get("category"))||void 0===g||g.setValue(this.categoryId),null===(p=this.recipeForm.get("ingredients"))||void 0===p||p.setValue(t.ingredients),null===(m=this.recipeForm.get("preparation"))||void 0===m||m.setValue(t.preparation),null===(_=this.recipeForm.get("show_to_others"))||void 0===_||_.setValue(t.show_to_others),null===(F=this.recipeForm.get("user_token"))||void 0===F||F.setValue(this.token)}onSubmit(){this.recipeForm.valid?(this.recipeForm.patchValue({user_token:JSON.parse(this.token)}),this.recipesService.uptadeRecipe(this.recipeForm.value).subscribe(t=>{console.log(t)}),this.setOpen(!0)):this.errorMessage="\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0432\u0441\u0456 \u043f\u043e\u043b\u044f \u0444\u043e\u0440\u043c\u0438!"}onInputFocus(){this.errorMessage=""}setOpen(t){this.isAlertOpen=t}reload(){this.router.navigate(["myRecipes",this.categoryId],{queryParams:{category:this.categoryName.category_name}})}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(v.e),e.Y36(b.G),e.Y36(P.v),e.Y36(d.F0),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-edit"]],decls:28,vars:8,consts:[[3,"translucent"],["slot","start"],["text","",3,"click"],[3,"formGroup"],["lines","none",1,"ion-margin","ion-padding","ion-text-center"],["formControlName","title","type","text","fill","solid","label","\u041d\u0430\u0437\u0432\u0430 \u0441\u0442\u0440\u0430\u0432\u0438","labelPlacement","floating",3,"clearInput","ionFocus"],["formControlName","photo","type","text","fill","solid","label","\u0424\u043e\u0442\u043e \u0441\u0442\u0440\u0430\u0432\u0438","labelPlacement","floating",3,"clearInput","ionFocus"],["formControlName","category","justify","space-between","label","\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f","placeholder","\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f","interface","popover",3,"ionFocus"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ingredients","label","\u0406\u043d\u0433\u0440\u0435\u0434\u0456\u0454\u043d\u0442\u0438","labelPlacement","floating","placeholder","\u0406\u043d\u0433\u0440\u0435\u0434\u0456\u0454\u043d\u0442\u0438",3,"ionFocus"],["formControlName","preparation","label","\u041f\u0440\u0438\u0433\u043e\u0442\u0443\u0432\u0430\u043d\u043d\u044f","labelPlacement","floating","placeholder","\u041f\u0440\u0438\u0433\u043e\u0442\u0443\u0432\u0430\u043d\u043d\u044f",3,"ionFocus"],["slot","end","label","\u041c\u0456\u0442\u043a\u0430","legacy","","formControlName","show_to_others"],["shape","round",3,"click"],["class","another-error","color","danger",4,"ngIf"],["header","\u0420\u0435\u0446\u0435\u043f\u0442 \u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e","subHeader","","message","",1,"alert",3,"isOpen","buttons","didDismiss"],[3,"value"],["color","danger",1,"another-error"],[1,"error"]],template:function(t,u){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," \u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0440\u0435\u0446\u0435\u043f\u0442 "),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-back-button",2),e.NdJ("click",function(){return u.reload()}),e.qZA()()()(),e.TgZ(6,"ion-content")(7,"form",3)(8,"ion-list",4)(9,"ion-item")(10,"ion-input",5),e.NdJ("ionFocus",function(){return u.onInputFocus()}),e.qZA()(),e.TgZ(11,"ion-item")(12,"ion-input",6),e.NdJ("ionFocus",function(){return u.onInputFocus()}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-select",7),e.NdJ("ionFocus",function(){return u.onInputFocus()}),e.YNc(15,y,2,2,"ion-select-option",8),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-textarea",9),e.NdJ("ionFocus",function(){return u.onInputFocus()}),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-textarea",10),e.NdJ("ionFocus",function(){return u.onInputFocus()}),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-label"),e._uU(22,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0456\u043d\u0448\u0438\u043c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430\u043c"),e.qZA(),e._UZ(23,"ion-checkbox",11),e.qZA(),e.TgZ(24,"ion-button",12),e.NdJ("click",function(){return u.onSubmit()}),e._uU(25,"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"),e.qZA(),e.YNc(26,E,3,1,"ion-text",13),e.qZA(),e.TgZ(27,"ion-alert",14),e.NdJ("didDismiss",function(){return u.setOpen(!1)}),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("formGroup",u.recipeForm),e.xp6(3),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(3),e.Q6J("ngForOf",u.categories),e.xp6(11),e.Q6J("ngIf",u.errorMessage),e.xp6(),e.Q6J("isOpen",u.isAlertOpen)("buttons",u.alertButtons))},dependencies:[h.sg,h.O5,r._Y,r.JJ,r.JL,r.sg,r.u,o.Ge,o.YG,o.Sm,o.nz,o.W2,o.Gu,o.pK,o.Ie,o.Q$,o.q_,o.t9,o.n0,o.yW,o.g2,o.wd,o.sr,o.w,o.QI,o.j9,o.oU],styles:["ion-title[_ngcontent-%COMP%], ion-back-button[_ngcontent-%COMP%]{color:#333}ion-title[_ngcontent-%COMP%]{font-size:20px}ion-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-medium);margin-bottom:10px}ion-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{min-height:100px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: rgb(120, 156, 21);--border-color-checked: rgb(120, 156, 21)}ion-button[_ngcontent-%COMP%]{margin-top:20px;--background: rgb(50, 65, 27);margin-bottom:20px}"]}),s})()}];let I=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(R),d.Bz]}),s})(),Z=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,r.u5,r.UX,o.Pc,I]}),s})()}}]);